<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Conduct Parallel Analysis — fa_parallel • ShinyItemAnalysis</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Conduct Parallel Analysis — fa_parallel" />
<meta property="og:description" content="Computes the eigenvalues of the sample correlation matrix and the eigenvalues
obtained from a random correlation matrix for which no factors/components are
assumed. By default, the function utilizes a modified Horn's (1965) method,
which -- instead of mean -- uses 95th percentile of each item eigenvalues
sampling distribution as a threshold to find the optimal number of
factors/components." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ShinyItemAnalysis</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.3.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/patriciamar/ShinyItemAnalysis/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Conduct Parallel Analysis</h1>
    <small class="dont-index">Source: <a href='https://github.com/patriciamar/ShinyItemAnalysis/blob/master/R/fa_parallel.R'><code>R/fa_parallel.R</code></a></small>
    <div class="hidden name"><code>fa_parallel.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Computes the eigenvalues of the sample correlation matrix and the eigenvalues
obtained from a random correlation matrix for which no factors/components are
assumed. By default, the function utilizes a modified Horn's (1965) method,
which -- instead of mean -- uses 95th percentile of each item eigenvalues
sampling distribution as a threshold to find the optimal number of
factors/components.</p>
    </div>

    <pre class="usage"><span class='fu'>fa_parallel</span><span class='op'>(</span>
  <span class='va'>Data</span>,
  cor <span class='op'>=</span> <span class='st'>"pearson"</span>,
  n_obs <span class='op'>=</span> <span class='cn'>NULL</span>,
  method <span class='op'>=</span> <span class='st'>"pca"</span>,
  threshold <span class='op'>=</span> <span class='st'>"quantile"</span>,
  p <span class='op'>=</span> <span class='fl'>0.95</span>,
  n_iter <span class='op'>=</span> <span class='fl'>20</span>,
  plot <span class='op'>=</span> <span class='cn'>TRUE</span>,
  show_kaiser <span class='op'>=</span> <span class='cn'>TRUE</span>,
  fm <span class='op'>=</span> <span class='st'>"minres"</span>,
  use <span class='op'>=</span> <span class='st'>"pairwise"</span>,
  <span class='va'>...</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>Data</th>
      <td><p><em>data.frame</em> or <em>matrix</em>, dataset (where rows are
observations and columns items) or correlation matrix (recognized
automatically).</p></td>
    </tr>
    <tr>
      <th>cor</th>
      <td><p><em>character</em>, how to calculate the correlation matrix of the
real data. Can be either <code>pearson</code> (default), <code>tetrachoric</code> or
<code>polychoric</code>. Unambiguous abbreviations accepted.</p></td>
    </tr>
    <tr>
      <th>n_obs</th>
      <td><p><em>integer</em>, in case you provided the correlation matrix
directly as the input, you have to provide the number of observations in
the original dataset.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p><em>character</em>, either <code>fa</code>, <code>pca</code>, or <code>both</code>
(the default). Which method to use for the eigenvalues simulation and
computation.</p></td>
    </tr>
    <tr>
      <th>threshold</th>
      <td><p><em>character</em>, whether to use traditionall Horn's method
or more recent and well-performing quantile one. Either <code>mean</code> or
<code>quantile</code> (default). Can be abbreviated.</p></td>
    </tr>
    <tr>
      <th>p</th>
      <td><p><em>numeric</em> (0--1), probability for which the sample quantile is
produced. Defaults to <code>.95</code>. Ignored if <code>threshold = "mean"</code>.</p></td>
    </tr>
    <tr>
      <th>n_iter</th>
      <td><p><em>integer</em>, number of iterations, i.e. the number of
zero-factor multivariate normal distributions to sample. Defaults to
<code>20</code>.</p></td>
    </tr>
    <tr>
      <th>plot</th>
      <td><p><em>logical</em>, if <code>TRUE</code> (the default), show the plot along
with the function results. To create the plot from the resulting object
afterwards, call <code><a href='https://rdrr.io/r/graphics/plot.default.html'>plot()</a></code>.</p></td>
    </tr>
    <tr>
      <th>show_kaiser</th>
      <td><p><em>logical</em>, whether to show Kaiser boundary in the
plot (the default) or not.</p></td>
    </tr>
    <tr>
      <th>fm</th>
      <td><p><em>character</em>, factoring method. See <code><a href='https://rdrr.io/pkg/psych/man/fa.html'>fa</a></code>
from the package <code><a href='https://rdrr.io/pkg/psych/man/00.psych-package.html'>psych</a></code>.</p></td>
    </tr>
    <tr>
      <th>use</th>
      <td><p>an optional character string giving a
    method for computing covariances in the presence
    of missing values.  This must be (an abbreviation of) one of the strings
    <code>"everything"</code>, <code>"all.obs"</code>, <code>"complete.obs"</code>,
    <code>"na.or.complete"</code>, or <code>"pairwise.complete.obs"</code>.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed on to <code><a href='https://rdrr.io/pkg/psych/man/tetrachor.html'>psych::polychoric</a></code></p><dl>
    <dt><code>correct</code></dt><dd><p>Correction value to use to correct for continuity in the case of zero entry cell for tetrachoric, polychoric, polybi, and mixed.cor.  See the examples for the effect of correcting versus not correcting for continuity.</p></dd>
    <dt><code>smooth</code></dt><dd><p>if TRUE and if the tetrachoric/polychoric matrix is not positive definite, then apply a simple smoothing algorithm using cor.smooth</p></dd>
    <dt><code>global</code></dt><dd><p>When finding pairwise correlations, should we use the global values of the tau parameter (which is somewhat faster), or the local values (global=FALSE)?  The local option is equivalent to the polycor solution, or to doing one correlation at a time. global=TRUE borrows information for one item pair from the other pairs using those item's frequencies.   This will make a difference in the presence of lots of missing data. With very small sample sizes with global=FALSE and correct=TRUE, the function will fail (for as yet underdetermined reasons.</p></dd>
    <dt><code>weight</code></dt><dd><p>A vector of length of the number of observations that specifies the weights to apply to each case.  The NULL case is equivalent of weights of 1 for all cases.</p></dd>
    <dt><code>progress</code></dt><dd><p>Show the progress bar (if  not doing multicores)</p></dd>
    <dt><code>ML</code></dt><dd><p>ML=FALSE  do a quick two step procedure, ML=TRUE, do longer maximum likelihood --- very slow! Deprecated</p></dd>
    <dt><code>delete</code></dt><dd><p>Cases with no variance are deleted with a warning before proceeding.</p></dd>
    <dt><code>max.cat</code></dt><dd><p>The maximum number of categories to bother with for polychoric.</p></dd>
  
</dl></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>An object of class <code>data.frame</code> and <code>sia_parallel</code>. Can be
  plotted using <code><a href='https://rdrr.io/r/graphics/plot.default.html'>plot()</a></code>.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>Horn proposed a solution to the problem of optimal factor number
identification using an approach based on a Monte Carlo simulation.</p>
<p>First, several (20 by default) zero-factor <code>p</code>-variate normal
distributions (where <code>p</code> is the number of columns) are obtained, and
<code>p</code> × <code>p</code> correlation matrices are computed for them. Eigenvalues
of each matrix is then calculated in order to get an eigenvalues sampling
distribution for each simulated variable.</p>
<p>Traditionally, Horn obtains an average of each sampling distribution and
these averages are used as a threshold which is compared with eigenvalues of
the original, real data. However, <em>usage of the mean was later disputed</em>
by Buja &amp; Eyuboglu (1992), and 95th percentile of eigenvalues sampling
distribution was suggested as a more accurate threshold. This, more recent
method is used by default in the function.</p>
    <h2 class="hasAnchor" id="references"><a class="anchor" href="#references"></a>References</h2>

    <p>Horn, J. L. (1965). A rationale and test for the number of factors in factor
analysis. Psychometrika, 30, 179--185. doi: <a href='https://doi.org/10.1007/BF02289447'>10.1007/BF02289447</a></p>
<p>Buja, A., &amp; Eyuboglu, N. (1992). Remarks on parallel analysis. Multivariate
Behavioral Research, 27, 509--540. doi: <a href='https://doi.org/10.1207/s15327906mbr2704_2'>10.1207/s15327906mbr2704_2</a></p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Jan Netik <br />
Institute of Computer Science of the Czech Academy of Sciences <br />
<a href='mailto:netik@cs.cas.cz'>netik@cs.cas.cz</a></p>
<p>Patricia Martinkova <br />
Institute of Computer Science of the Czech Academy of Sciences <br />
<a href='mailto:martinkova@cs.cas.cz'>martinkova@cs.cas.cz</a></p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"TestAnxietyCor"</span>, package <span class='op'>=</span> <span class='st'>"ShinyItemAnalysis"</span><span class='op'>)</span>
<span class='fu'>fa_parallel</span><span class='op'>(</span><span class='va'>TestAnxietyCor</span>, n_obs <span class='op'>=</span> <span class='fl'>335</span>, method <span class='op'>=</span> <span class='st'>"pca"</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='message'>The input was recognized as a correlation matrix.</span>
#&gt; <span class='message'>Assuming 335 observations in the original data.</span></div><div class='img'><img src='fa_parallel-1.png' alt='' width='700' height='433' /></div><div class='output co'>#&gt; According to the parallel analysis, the optimal number of principal components is 1. 
#&gt; Following the Kaiser rule, 2 components are recommended.</div><div class='input'>
<span class='kw'>if</span> <span class='op'>(</span><span class='cn'>FALSE</span><span class='op'>)</span> <span class='op'>{</span>
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span><span class='op'>(</span><span class='st'>"bfi"</span>, package <span class='op'>=</span> <span class='st'>"psych"</span><span class='op'>)</span>
<span class='va'>items</span> <span class='op'>&lt;-</span> <span class='va'>bfi</span><span class='op'>[</span>, <span class='fl'>1</span><span class='op'>:</span><span class='fl'>25</span><span class='op'>]</span>

<span class='fu'>fa_parallel</span><span class='op'>(</span><span class='va'>items</span><span class='op'>)</span>
<span class='fu'>fa_parallel</span><span class='op'>(</span><span class='va'>items</span>, threshold <span class='op'>=</span> <span class='st'>"mean"</span><span class='op'>)</span> <span class='co'># traditional Horn's method</span>
<span class='op'>}</span>

</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Patricia Martinkova, Adela Hladka, Jan Netik.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


